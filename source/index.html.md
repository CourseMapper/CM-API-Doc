---
title: CourseMapper API Reference

language_tabs:
  - shell

toc_footers: 
  - <a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a>

includes:
  - discussions
  - links
  - votes
  - accounts
  - errors
  - models

search: true
---

# Introduction

Welcome to the CourseMapper API! You can use our API to access CourseMapper API endpoints, which can let you use many functions available in CourseMapper.

We have language bindings in Curl and Json. You can view code examples in the dark area to the right.

This API documentation page was created with [Slate](https://github.com/tripit/slate).  

<aside>
  `ObjectId` in this document refers to `_id` generated by mongoDB.
  In all requests, the objects that are returned will have `_id` as the primary key or the identifier. 
</aside>

# Authentication
 
CourseMapper uses standard OAuth2 to allow access to the API. You can register a new application to obtain the clientId and clientSecret [here](http://coursemapper/settings/apps).

## 1. Authorization.

Your mobile or web application should provide a button that opens a popup box or a webview to visit this URL:

`https://coursemapper/api/oauth2/authorize?client_id=<client_id>&response_type=code`

### URL Parameters

Parameter | Description
--------- | -----------
client_id | The Client ID 
response_type | "code" (the only supported)

Once users are logged in, they will be redirected to the URL provided in `redirect_uri` that the application provides, or if this field was set to be empty, then it will be redirected to an empty page 

`https://coursemapper/api/oauth2/app?code=<temporary_token>` 

### Response URL Parameters

Parameter | Description
--------- | -----------
code | Contains the temporary token

that contains the temporary token. 

## 2. Obtain Temporary Token when user is authenticated.
Your application will have to parse this URL above and grab the `temporary_token` for the next step.

## 3. Exchange for Access Token
Once the application has obtained a temporary token, now it has to exchange it for an access token. To do that, the application needs to send a request to:

POST `http or https://coursemapper/api/oauth2/token`

### POST Parameters

Parameter | Description
--------- | -----------
code | Temporary Token 
grant_type| "authorization_code" (the only supported)


### Response 
```json
{
  "result": true,
  "access_token": {
    "accessToken": "random-string",
    "userId": "mongo-objectId",
    "email": "email@email.com"
  }
}
```
The result from the exchange contains this json:
  
Parameter | Description
--------- | -----------
result | boolean 
access_token | object  

## Finally
CourseMapper expects for the access token to be included in all API requests to the server in a header that looks like the following:

`Bearer <accessToken>`

`Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah`

# Categories 
   
## Get All Categories
  
```shell
curl "https://coursemapper/api/categories"
  -H "Authorization: Bearer <accessToken>"

e.g.:
curl "https://coursemapper/api/categories"
  -H "Authorization: Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah"
```

> The above command returns JSON structured like this:

```json
{
  "result": true, "categories":
  [
    {
      "_id": "56b0efc1309953f719610f58",
      "name": "I.T",
      "slug": "I-T",
      "parentCategory": null,
      "positionFromRoot": {"x": 1, "y": 0},
      "courseTags": [{
        "name": "PHP"
      }],
      "subCategories": [
        {
          "_id": "56b0efc1309953f719610f31",
          "name": "Server Side",
          "slug": "server-side",
          "parentCategory": 1,
          "positionFromRoot": {"x": 2, "y": 2},
          "courseTags": [{
            "name": "Web"
          }],
          "subCategories":[]
        }
      ]
    } 
  ]
}
```

This endpoint retrieves all Categories.

### HTTP Request

`GET /api/categories`

### Response
Key | Value
----- | -----
result | boolean
categories | array of Category

# Courses 

## Get Courses based on Category Id

```shell
curl "https://coursemapper/api/category/<categoryId>/courses"
  -H "Authorization: Bearer <accessToken>"

e.g.:
curl "https://coursemapper/api/category/56b0efc1309953f719610f58/courses"
  -H "Authorization: Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah"
```

> The above command returns JSON structured like this:

```json
{
   "result":true,
   "courses":[
      {
         "_id":"56b11bf8309953f719610f65", 
         "dateAdded":"2016-02-02T21:13:28.808Z",
         "slug":"Advanced-Web-Technologies-WebTech-2",
         "name":"Advanced Web Technologies (WebTech 2)",
         "createdBy":"5530bef8e5a9e0dd261059b8",
         "category":"56b0efc1309953f719610f58",
         "description":"<div>Advanced Web Technologies (WebTech 2)</div>",
         "smallDescription":"Advanced Web Technologies (WebTech 2)", 
         "picture":"/img/courses/56b11bf8309953f719610f65.png",
         "courseTags":[
            "56cde0ff8754f7b704180ada"
         ] 
      },
      {
         "_id":"56cdf5dced46e6dd19c3d555", 
         "dateAdded":"2016-02-24T18:26:36.910Z",
         "slug":"Advanced-Web-Technologies-WebTech-1",
         "name":"Advanced Web Technologies (WebTech 1)",
         "createdBy":"5530bef8e5a9e0dd261059b8",
         "category":"56b0efc1309953f719610f58",
         "description":"<div>course description</div>",
         "smallDescription":"course\'s small description", 
         "courseTags":[
            "56cdf5dded46e6dd19c3d556"
         ] 
      }
   ]
}
```

`GET /api/category/<categoryId>/courses`

### Response
Key | Value
----- | -----
result | boolean
courses | array of CoursePreview 

## Get Course Detail

```shell
curl "https://coursemapper/api/course/<courseId>"
  -H "Authorization: Bearer <accessToken>"

e.g.:
curl "https://coursemapper/api/course/56b0efc1309953f719610aaa"
  -H "Authorization: Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah"
```

> The above command returns JSON structured like this:

```json
{
  "result": true,
  "course": {
    "_id": "56b11bf8309953f719610f65",
    "dateUpdated": "2016-02-24T16:57:35.557Z",
    "dateAdded": "2016-02-02T21:13:28.808Z",
    "slug": "Advanced-Web-Technologies-WebTech-2",
    "name": "Advanced Web Technologies (WebTech 2)",
    "createdBy": {
      "_id": "5530bef8e5a9e0dd261059b8",
      "username": "rpl",
      "displayName": "akana abaca"
    },
    "category": {
      "_id": "56b0efc1309953f719610f58",
      "dateAdded": "2016-02-02T18:04:49.961Z",
      "dateUpdated": "2016-02-02T18:04:49.961Z",
      "slug": "Web-Technologies",
      "name": "Web Technologies",
      "parentCategory": "568d51194076070762cfb8f9",
      "positionFromRoot": {
        "y": -316,
        "x": 275
      }, 
      "courseTags": [
        "56cde0ff8754f7b704180ada",
        "56cdf5dded46e6dd19c3d556"
      ] 
    },
    "description": "<div>Advanced Web Technologies (WebTech 2)</div>",
    "smallDescription": "Advanced Web Technologies (WebTech 2)", 
    "picture": "/img/courses/56b11bf8309953f719610f65.png",
    "courseTags": [
      {
        "_id": "56cde0ff8754f7b704180ada", 
        "dateAdded": "2016-02-24T16:57:35.982Z",
        "slug": "PHP",
        "name": "PHP"  
      }
    ],
    "managers": [],
    "isEnrolled": false
  }
}
```

`GET /api/category/<categoryId>/courses`

### Response
Key | Value
----- | -----
result | boolean
course | Course 

# Maps 

## Get All Nodes Based on Course Id
```shell
curl "https://coursemapper/api/treeNodes/course/<courseId>"
  -H "Authorization: Bearer <accessToken>"

e.g.:
curl "https://coursemapper/api/treeNodes/course/56b0efc1309953f719610aaa"
  -H "Authorization: Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah"
```
> The above command returns JSON structured like this:

```json
{
  "result": true,
  "treeNodes": [
    {
      "_id": "56b11ea0309953f719610f66",
      "dateUpdated": "2016-02-02T21:49:06.216Z",
      "dateAdded": "2016-02-02T21:24:48.164Z",
      "name": "Overview",
      "createdBy": {
        "_id": "5530bef8e5a9e0dd261059b8",
        "displayName": "akana abaca"
      },
      "courseId": "56b11bf8309953f719610f65",
      "positionFromRoot": {
        "y": 6,
        "x": 221
      }, 
      "isDeleted": false,
      "resources": [],
      "type": "subTopic",
      "childrens": [
        {
          "_id": "56b12452309953f719610f67",
          "dateUpdated": "2016-02-24T18:52:04.795Z",
          "dateAdded": "2016-02-02T21:49:06.207Z",
          "name": "Overview of Web Tech tes",
          "createdBy": {
            "_id": "5530bef8e5a9e0dd261059b8",
            "displayName": "akana abaca"
          },
          "courseId": "56b11bf8309953f719610f65",
          "parent": "56b11ea0309953f719610f66",
          "positionFromRoot": {
            "y": 77,
            "x": 407
          }, 
          "isDeleted": false,
          "resources": [
            {
              "_id": "56b12452309953f719610f68",
              "dateUpdated": "2016-02-02T21:49:06.210Z",
              "dateAdded": "2016-02-02T21:49:06.210Z",
              "type": "pdf",
              "createdBy": "5530bef8e5a9e0dd261059b8",
              "link": "/resources/56b12452309953f719610f67.pdf",
              "courseId": "56b11bf8309953f719610f65",
              "treeNodeId": "56b12452309953f719610f67", 
              "isDeleted": false
            },
            {
              "_id": "56b1e2a7a526d27803559a14",
              "dateUpdated": "2016-02-03T11:21:11.525Z",
              "dateAdded": "2016-02-03T11:21:11.525Z",
              "type": "mp4",
              "createdBy": "5530bef8e5a9e0dd261059b8",
              "link": "/resources/56b12452309953f719610f67.mp4",
              "courseId": "56b11bf8309953f719610f65",
              "treeNodeId": "56b12452309953f719610f67", 
              "isDeleted": false
            }
          ],
          "type": "contentNode",
          "childrens": []
        }
      ]
    }
  ]
}
```
`GET /api/treeNodes/course/<courseId>`

### Response
Key | Value
----- | -----
result | boolean
treeNodes | [treeNode] 

## Get Node Detail

```shell
curl "https://coursemapper/api/treeNode/<treeNodeId>"
  -H "Authorization: Bearer <accessToken>"

e.g.:
curl "https://coursemapper/api/treeNode/56b0efc1309953f719610aaa"
  -H "Authorization: Bearer 2ksjow2039z=_18jaszxvnKLJlsfHUHfsjklmvoiay9146fah"
```
> The above command returns JSON structured like this:

```json
{
  "result": true,
  "treeNode": 
  {
    "_id": "56b12452309953f719610f67",
    "dateUpdated": "2016-02-24T18:52:04.795Z",
    "dateAdded": "2016-02-02T21:49:06.207Z",
    "name": "Overview of Web Tech tes",
    "createdBy": {
      "_id": "5530bef8e5a9e0dd261059b8",
      "displayName": "akana abaca"
    },
    "courseId": "56b11bf8309953f719610f65",
    "parent": "56b11ea0309953f719610f66",
    "positionFromRoot": {
      "y": 77,
      "x": 407
    }, 
    "isDeleted": false,
    "resources": [
      {
        "_id": "56b12452309953f719610f68",
        "dateUpdated": "2016-02-02T21:49:06.210Z",
        "dateAdded": "2016-02-02T21:49:06.210Z",
        "type": "pdf",
        "createdBy": "5530bef8e5a9e0dd261059b8",
        "link": "/resources/56b12452309953f719610f67.pdf",
        "courseId": "56b11bf8309953f719610f65",
        "treeNodeId": "56b12452309953f719610f67", 
        "isDeleted": false
      },
      {
        "_id": "56b1e2a7a526d27803559a14",
        "dateUpdated": "2016-02-03T11:21:11.525Z",
        "dateAdded": "2016-02-03T11:21:11.525Z",
        "type": "mp4",
        "createdBy": "5530bef8e5a9e0dd261059b8",
        "link": "/resources/56b12452309953f719610f67.mp4",
        "courseId": "56b11bf8309953f719610f65",
        "treeNodeId": "56b12452309953f719610f67", 
        "isDeleted": false
      }
    ],
    "type": "contentNode",
    "childrens": []
  }
}
```
`GET /api/treeNode/<treeNodeId>`

### Response
Key | Value
----- | -----
result | boolean
treeNode | treeNode